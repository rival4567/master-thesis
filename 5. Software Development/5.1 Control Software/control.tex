By analyzing the current manual process on the bending machine, a flowchart for the mobile robot unit
is developed for the automated bending process. This
diagram, which is still partly abstract, enables the individual activities of the unit to be identified and
their interactions to be described right at the start of the research project. The requirements for the
overall system are also defined, which are explained in more detail
in subchapter \ref{sub:overview}. The description of the process and the definition of the overall requirements
represent an interacting process that inevitably had to be iterated through. This means that the results
of both work packages were revised several times. The final result of these iterations regarding the
activities to be performed by the mobile robot unit can be seen in Figure 1 and Figure 2. Five essential
components of the unit emerge from the process. These are as follows: Feeding, alignment, bending,
checking and depositing.

In the first step, the feed, the sheet metal is to be separated from a stack of sheets. The advantage of
arranging the raw sheets in stacks is that as many parts as possible can be stored in as little space as
possible. Conversely, this means that more space is available for the bent sheet metal parts, which is
of great importance due to the limited space available on site at the company. The sheet thickness is
also checked in advance during feeding and parts outside the tolerance are sorted out. Furthermore,
this information should be taken into account in the further course of the process when adjusting the
parameters of the bending machine.

For space reasons, a device should be integrated into the feeder that allows the robot to grip the sheet
metal at a new position if necessary, as otherwise collisions between the robot and the bending
machine may occur during the subsequent bending process if the robot is not realigned.
During the bending process, there should be two different design variants depending on the sheet
variant. With small sheets, the robot lets go of the sheet, which has an advantageous effect on the
robot programming. In order to prevent twisting in the case of larger parts, it is essential to hold them
throughout the entire bending process. The challenge here lies in programming a robot movement
whose path and path speed matches the movement of the sheet metal, which in turn depends on the
lowering speed of the bending punch.

A camera system is used to record both the angle and length of the sheet metal after each individual
bending process. The angle is used to readjust the bending machines. The length measurements
serve as a further instrument for monitoring the process. If a large number of rejects occur in a very
short time, the entire process is to be stopped.
The fully bent sheet metal parts are to be placed in storage boxes that are already in use in the
company but still need to be adapted.


\begin{longtable}{c}
    \small
    \begin{tikzpicture}[node distance=3.5cm]
        \node (start) [startstop] {Start};
        \node (proc0) [process, below of=start, yshift=1cm] {Initialisation of camera, \hyperref[acro:PLC]{PLC} and configuration of storage system parameters};
        \node (loop)  [processorange, below of=proc0, yshift=1.5cm] {Loop};
        \node (nodeint) [nodepage, left of=loop] {3};
        \node (dec0) [decision, below of=loop] {Is calibration requested from operator?};
        \node (intersection0) [coordinate, below of=dec0] {};
        \node (proc1) [process, right of=dec0, xshift=3cm] {Perform hand-eye calibration};
        \node (dec1) [decision, below of=intersection0, yshift=0.5cm] {Is drawer of shelf open?};
        \node (proc2) [process, right of=dec1, xshift=3cm] {Open empty drawer of shelf};
        \node (intersection1) [nodepage, below of=dec1] {1};

        \draw [arrow] (start) -- (proc0);
        \draw [arrow] (proc0) -- (loop);
        \draw [arrow] (loop) -- (dec0);
        \draw [arrow] (dec0) -- node[anchor=east, yshift=0.3cm, xshift=0.35cm] {Yes} (proc1);
        \draw [black, thick] (dec0) -- node[anchor=south, yshift=-0.3cm, xshift=-0.35cm] {No} (intersection0);
        \draw [black, thick] (proc1) |- (intersection0);
        \draw [arrow] (intersection0) -- (dec1);
        \draw [arrow] (dec1) -- node[anchor=east, yshift=0.3cm, xshift=0.35cm] {No} (proc2);
        \draw [arrow] (dec1) -- node[anchor=south, yshift=-0.3cm, xshift=-0.45cm] {Yes} (intersection1);
        \draw [arrow] (proc2) |- (intersection1);
        \draw [arrow] (nodeint) -- (loop);
    \end{tikzpicture} \\

    \begin{tikzpicture}[node distance=3.5cm]
        \node (intersection1) [nodepage] {1};
        \node (proc3) [processorange, below of=intersection1, yshift=1.75cm] {Wait until sheet metal part is available at pickup station};
        \node (proc4) [process, below of=proc3, yshift=1.5cm] {Detect sheet metal part using camera};
        \node (point7) [coordinate, left of=proc4, xshift=-0.5cm] {};
        \node (proc5) [process, below of=proc4, yshift=1.5cm] {Pick the sheet metal part from the pickup station gripper};
        \node (proc6) [processorange, below of=proc5, yshift=1.5cm] {Wait until bending machine is ready};
        \node (point5) [coordinate, left of=proc6] {};
        \node (proc7) [process, below of=proc6, yshift=2cm] {Perform bending operation};
        \node (proc8) [process, below of=proc7, yshift=2cm] {Inspect bending angle using second camera};
        \node (dec2) [decision, below of=proc8, yshift=0cm] {Is bending angle within tolerance?};
        \node (proc9) [process, right of=dec2, xshift=3cm] {Discard sheet metal part};
        \node (intersection2) [nodepage, below of=proc9, yshift=2cm] {3};
        \node (point1) [coordinate, below of=dec2, yshift=0.5cm] {};
        \node (point2) [coordinate, right of=point1, xshift=3cm] {};
        \node (dec3) [decision, below of=point2, yshift=1cm] {Is part finished?};
        \node (intersection3) [nodepage, below of=dec3, yshift=0.5cm] {2};
        \node (point3) [coordinate, left of=dec3, xshift=0cm] {};
        \node (point4) [coordinate, below of=point3, yshift=3cm] {};
        \node (dec4) [decision, left of=point4, xshift=0.5cm] {Is regrasping of part required?};
        \node (point6) [coordinate, left of=dec4] {};
        \node (point8) [process, below of=dec4, yshift=0cm] {Place sheet metal part in pickup station gripper};
        \node (point9) [coordinate, left of=point8, xshift=-0.5cm] {};


        \draw [arrow] (intersection1) -- (proc3);
        \draw [arrow] (proc3) -- (proc4);
        \draw [arrow] (proc4) -- (proc5);
        \draw [arrow] (proc5) -- (proc6);
        \draw [arrow] (proc6) -- (proc7);
        \draw [arrow] (point5) -- (proc6.west);
        \draw [arrow] (proc7) -- (proc8);
        \draw [arrow] (proc8) -- (dec2);
        \draw [arrow] (dec2) -- node[anchor=east, yshift=0.3cm, xshift=0.35cm] {No} (proc9);
        \draw [arrow] (proc9) -- (intersection2);
        \draw [black, thick] (dec2) -- (point1);
        \draw [black, thick] (point1) -- node[anchor=east, yshift=0.3cm] {Yes} (point2);
        \draw [arrow] (point2) -- (dec3);
        \draw [black, thick] (dec3) -- node[anchor=west, yshift=0.3cm, xshift=-0.5cm] {No} (point3);
        \draw [black, thick] (point3) -- (point4);
        \draw [arrow] (point4) --  (dec4);
        \draw [black, thick] (point5) -- (point6);
        \draw [black, thick] (point6) -- node[anchor=west, yshift=0.3cm, xshift=-0.5cm] {No} (dec4);
        \draw [black, thick] (dec4) -- node[anchor=east, yshift=0.2cm, xshift=0cm] {Yes} (point8);
        \draw [black, thick] (point8) -- (point9);
        \draw [black, thick] (point9) -- (point7);
        \draw [arrow] (point7) --  (proc4.west);

        % \draw [arrow] (dec2) -- node[anchor=south, yshift=-0.1cm, xshift=-0.45cm] {Yes} (dec3);
        \draw [arrow] (dec3) -- node[anchor=south, yshift=0cm, xshift=-0.45cm] {Yes} (intersection3);


    \end{tikzpicture} \\

    \begin{tikzpicture}[node distance=2cm]
        \node (intersection3) [nodepage] {2};
        \node (proc10) [process, below of=intersection3] {Place the sheet in the drawer of shelf};
        \node (dec5) [decision, below of=proc10, yshift=-1.5cm] {Is current drawer of shelf filled?};
        \node (proc11) [process, right of=dec5, xshift=4.5cm] {Close the drawer of shelf};
        \node (dec6) [decision, below of=proc11, yshift=-2cm] {Is storage station full?};
        \node (intersection4) [nodepage, below of=dec5, yshift=-2cm] {3};
        \node (stop) [startstop, below of=dec6, yshift=-1.75cm] {Stop};


        \draw [arrow] (intersection3) -- (proc10);
        \draw [arrow] (proc10) -- (dec5);
        \draw [arrow] (proc11) -- (dec6);
        \draw [arrow] (dec5) -- node[anchor=east, yshift=0.3cm, xshift=0cm] {Yes} (proc11);
        \draw [arrow] (dec5) -- node[anchor=east, yshift=0.3cm, xshift=0cm] {No} (intersection4);
        \draw [arrow] (dec6) -- node[anchor=west, yshift=0.3cm, xshift=0cm] {No} (intersection4);
        \draw [arrow] (dec6) -- node[anchor=south, yshift=-0.2cm, xshift=-0.4cm] {Yes} (stop);


    \end{tikzpicture} \\
    \\
    \caption{Control program flowchart of robot unit} \label{tab:flowchart}
\end{longtable}


In teach pendant program tree, pose describes a frame transformation in 3D space \textit{i.e.} the three coordinates (x,y,z) and euler angles (R,P,Y) \textit{w.r.t.}
reference frame.

